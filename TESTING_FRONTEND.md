# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## üéØ –û–±–∑–æ—Ä

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Vitest** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞. –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤–∫–ª—é—á–∞–µ—Ç:
- `src/lib/gameLogic.test.ts` - 28 —Ç–µ—Å—Ç–æ–≤ (–ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã)
- `src/services/api.test.ts` - 15 —Ç–µ—Å—Ç–æ–≤ (API —Å–µ—Ä–≤–∏—Å—ã)

**–í—Å–µ–≥–æ: 43 —Ç–µ—Å—Ç–∞**

## üìã –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

### –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã (frontend + backend)
npm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ç–µ—Å—Ç—ã
npm run test:frontend
```

### –ò–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ frontend:

```bash
cd frontend

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –æ–¥–∏–Ω —Ä–∞–∑ (run mode) - –¥–ª—è CI/CD
npm test -- run

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ —Ä–µ–∂–∏–º–µ watch (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)
npm test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
npm test -- run --coverage

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
npm test -- run src/lib/gameLogic.test.ts

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
npm test -- run --reporter=verbose

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å UI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
npm test -- --ui
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:

- **`vitest.config.ts`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vitest
- **`src/test/setup.ts`** - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã
- **`package.json`** - —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ç–µ—Å—Ç–æ–≤ –≤ CI/CD –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:

```bash
VITE_API_URL=http://localhost:8000/api
```

–≠—Ç–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ API URL –±—É–¥–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–º –ø—É—Ç–µ–º (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è `fetch` –≤ —Ç–µ—Å—Ç–∞—Ö).

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid URL" –≤ CI/CD

**–°–∏–º–ø—Ç–æ–º—ã:**
```
TypeError: Invalid URL
‚ùØ Object.getLeaderboard src/services/api.ts:108:17
Serialized Error: { code: 'ERR_INVALID_URL', input: '/api/leaderboard' }
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í CI –æ–∫—Ä—É–∂–µ–Ω–∏–∏ `API_URL` –±—ã–ª –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –ø—É—Ç–µ–º (`/api`)
- `new URL('/api/leaderboard')` —Ç—Ä–µ–±—É–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–π URL

**–†–µ—à–µ–Ω–∏–µ:**
1. –ò–∑–º–µ–Ω–∏–ª–∏ –∫–æ–¥ –≤ `api.ts` - –∑–∞–º–µ–Ω–∏–ª–∏ `new URL()` –Ω–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ —Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. –î–æ–±–∞–≤–∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `VITE_API_URL` –≤ GitHub Actions workflow
3. –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ `setup.ts` —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–º URL –¥–ª—è —Ç–µ—Å—Ç–æ–≤

## ‚úÖ –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–æ:
```
‚úì src/lib/gameLogic.test.ts (28 tests)
‚úì src/services/api.test.ts (15 tests)
Test Files  2 passed (2)
Tests  43 passed (43)
```

### –í CI/CD (GitHub Actions):
–¢–µ—Å—Ç—ã —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Å–ø–µ—à–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `VITE_API_URL`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã —Å URL –≤ `api.ts`
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—é `localStorage` –≤ —Ç–µ—Å—Ç–∞—Ö

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏:

```bash
cd frontend
npm test -- run --coverage
```

–û—Ç—á–µ—Ç –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `coverage/`.

## üîç –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç:

```bash
npm test -- run -t "should login and return user with token"
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏:

```bash
npm test -- run --inspect-brk
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥:

```bash
npm test -- run --reporter=verbose
```

## üöÄ CI/CD Integration

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ GitHub Actions –ø—Ä–∏:
- Push –≤ –≤–µ—Ç–∫—É `main`
- –°–æ–∑–¥–∞–Ω–∏–∏ Pull Request

–°–º. `.github/workflows/ci-cd.yml` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ CI/CD:

1. **Backend Tests** - —Ç–µ—Å—Ç—ã –±—ç–∫–µ–Ω–¥–∞ (pytest)
2. **Frontend Tests** - —Ç–µ—Å—Ç—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (vitest)
3. **Frontend Lint** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
4. **Frontend Build** - —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏–∏
5. **Deploy** - –¥–µ–ø–ª–æ–π –Ω–∞ Render (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ push –≤ main)

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.test.ts` –∏–ª–∏ `.test.tsx` –≤ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/`:

```typescript
import { describe, it, expect } from 'vitest';

describe('MyComponent', () => {
  it('should do something', () => {
    expect(true).toBe(true);
  });
});
```

Vitest –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º `**/*.test.{ts,tsx}`.

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Vitest

```bash
# –†–µ–∂–∏–º watch —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Ñ–∞–π–ª—É
npm test -- --watch src/services/api.test.ts

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ failed —Ç–µ—Å—Ç—ã
npm test -- --run --changed

# –û–±–Ω–æ–≤–∏—Ç—å snapshots
npm test -- run -u

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º reporter
npm test -- run --reporter=json

# Bail on first failure
npm test -- run --bail=1
```
